// 自定义符号快捷输入

#define DELAY_TIME <5> // 定义宏延迟时间为 10 毫秒
#define HOLD_TIME <500> // 定义短按、长按时间阀值


/ { 
    // 切换到某层的操作
    switch_layer {
        // 如果有自定义行为，就需要把 &none 更换成真实的 behavior，例如 <&to 0 &kp A>
        zmk_todefault: to_default_layer {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&to 0 &none>;
        }; 

         // 短按空按键 ，长按切换到默认 layer 0
        th_todef: switch_to_default_layer {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = <3000>;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings = <&zmk_todefault>,<&none>;
        }; 

        zmk_tovim: to_vim_layer {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&to 2 &none>;
        }; 

         // 短按空按键 ，长按切换到 vim 编辑层 layer 1
        th_tovim: switch_to_vim_layer {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = <3000>;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings = <&zmk_tovim>,<&none>;
        }; 

        zmk_towrt: to_write_layer {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&to 3 &none>;
        }; 

         // 短按空按键 ，长按切换到写作模式层 layer 2
        th_towrt: switch_to_write_layer {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = <3000>;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings = <&zmk_towrt>,<&none>;
        }; 

    };
    // 快速输入中文符号
    macros {
        // 输入左双引号
        zmk_ldquote: left_double_quote {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkzsyh → “ 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp Z &kp S &kp Y &kp H &kp SPACE>;
        };

        // 输入右双引号
        zmk_rdquote: right_double_quote {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkysyh → “ 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp Y &kp S &kp Y &kp H &kp SPACE>;
        };

        // 输入左双引号、右双引号、左方向键
        zmk_dquote: both_double_quote {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmksyh → “” 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp S &kp Y &kp H &kp SPACE &kp LEFT>;
        };





        // 输入左单引号
        zmk_lsquote: left_single_quote {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkzdyh → ‘ 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp Z &kp D &kp Y &kp H &kp SPACE>;
        };

        // 输入右单引号
        zmk_rsquote: right_single_quote {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkydyh → ’ 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp Y &kp D &kp Y &kp H &kp SPACE>;
        };

        // 输入左单引号、右单引号、左方向键
        zmk_squote: both_single_quote {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkdyh → ‘’ 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp D &kp Y &kp H &kp SPACE &kp LEFT>;
        };





        // 输入左双书名号
        zmk_ldguill: left_double_guillemet {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkzssmh → 《 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp Z &kp S &kp S &kp M &kp H &kp SPACE>;
        };

        // 输入右双书名号
        zmk_rdguill: right_double_guillemet {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkyssmh → 》 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp Y &kp S &kp S &kp M &kp H &kp SPACE>;
        };

        // 输入左、右双书名号、左方向键
        zmk_dguill: both_double_guillemet {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkssmh → 《》 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp S &kp S &kp M &kp H &kp SPACE &kp LEFT>;
        };








        // 输入左单书名号
        zmk_lsguill: left_single_guillemet {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkzdsmh → 〈 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp Z &kp D &kp S &kp M &kp H &kp SPACE>;
        };

        // 输入右单书名号
        zmk_rsguill: right_single_guillemet {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkydsmh → 〉 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp Y &kp D &kp S &kp M &kp H &kp SPACE>;
        };

        // 输入左、右单书名呈、左方向键
        zmk_sguill: both_single_guillemet {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // 需要在输入法当中添加 zmkysyh → 《》 这样的定义才能使用，同时适用于 windows 和 linux 输入法
            bindings = <&kp ESC &kp Z &kp M &kp K &kp D &kp S &kp M &kp H &kp SPACE &kp LEFT>;
        };





        // 输入左、右括号、左方向键
        zmk_parent: both_parenthesis {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            wait-ms = DELAY_TIME;
            tap-ms = DELAY_TIME;
            // linux不需要额外设置，windows不确定需不需要额外设置
            bindings = <&kp LPAR &kp RPAR &kp LEFT>;
        };

        // 用于 space 和 ← 的长按、短按组合键
        zmk_space: tab_hold_space {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&kp SPACE>;
        };

        // 用于 space 和 ← 的长按、短按组合键
        zmk_left: tab_hold_left {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&kp LEFT_ARROW>;
        };

        // 用于 enter 和 → 的长按、短按组合键
        zmk_enter: tab_hold_enter {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&kp ENTER>;
        };

        // 用于 enter 和 → 的长按、短按组合键
        zmk_right: tab_hold_right {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&kp RIGHT_ARROW>;
        };

        // 主机清除当前槽位的匹配信息之后，需要在 zmk 的相同槽位清除匹配信息，它不会影响其它槽位的匹配信息
        zmk_clear: clear_current_bluetooth {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&bt BT_CLR>;
        };

        // 切换到槽位 0 的蓝牙连接
        zmk_btone: to_bluetooth_one_connect {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&bt BT_SEL 0>;
        };

        // 切换到槽位 1 的蓝牙连接
        zmk_bttwo: to_bluetooth_two_connect {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&bt BT_SEL 1>;
        };

        //切换到槽位 2 的蓝牙连接 
        zmk_btthree: to_bluetooth_three_connect {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;   // zero-parameter macro
            bindings = <&bt BT_SEL 2>;
        };       


        // 短按输出 “”，长按输出 ‘’
        th_quote: double_single_quote {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = HOLD_TIME;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            quick-tap-ms = <200>;         // 快速连点也按 tap 处理（可选）
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings =<&zmk_squote>, <&zmk_dquote> ;
        };

        // 短按输出 《》，长按输出 〈〉
        th_guill: double_single_guill {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = HOLD_TIME;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            quick-tap-ms = <200>;         // 快速连点也按 tap 处理（可选）
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings =<&zmk_sguill>, <&zmk_dguill> ;
        };

        // 短按输出 space ，长按输出 ←
        th_space: space_left {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = HOLD_TIME;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            quick-tap-ms = <200>;         // 快速连点也按 tap 处理（可选）
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings = <&zmk_left>,<&zmk_space>;
        };   

         // 短按输出 enter ，长按输出 →
        th_enter: enter_right {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = HOLD_TIME;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            quick-tap-ms = <200>;         // 快速连点也按 tap 处理（可选）
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings = <&zmk_right>,<&zmk_enter>;
        };

         // 短按空按键 ，长按清除当前槽位的蓝牙连接匹配
        th_clear: clear_bluetooth_bond {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = <3000>;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings = <&zmk_clear>,<&none>;
        };   

         // 短按空按键 ，长按切换到蓝牙连接槽位 0
        th_btone: to_bluetooth_bond_one {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = <3000>;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings = <&zmk_btone>,<&none>;
        };  

         // 短按空按键 ，长按切换到蓝牙连接槽位 1
        th_bttwo: to_bluetooth_bond_two {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = <3000>;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings = <&zmk_bttwo>,<&none>;
        };       

         // 短按空按键 ，长按切换到蓝牙连接槽位 0
        th_btthree: to_bluetooth_bond_three {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            tapping-term-ms = <3000>;      // 短按判定时间，可调
            flavor = "balanced";          // 推荐 balanced，更自然
            // 长按在前，短按在后；同时适用于 windows 和 linux 输入法
            bindings = <&zmk_btthree>,<&none>;
        };       




    };
};
